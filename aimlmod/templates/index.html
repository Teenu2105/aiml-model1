<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academic Performance Chatbot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        .chat-container {
            height: 70vh;
            overflow-y: auto;
        }
        .chat-container::-webkit-scrollbar {
            width: 6px;
        }
        .chat-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .chat-container::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 10px;
        }
        .typing-indicator {
            display: none;
        }
        .typing-indicator.show {
            display: flex;
        }
        .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #9ca3af;
            animation: typing 1.4s infinite ease-in-out;
        }
        .dot:nth-child(1) { animation-delay: -0.32s; }
        .dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="max-w-4xl mx-auto p-4">
        <!-- Header -->
        <div class="bg-white rounded-t-2xl shadow-lg p-6 border-b border-gray-200">
            <div class="flex items-center space-x-4">
                <div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                    </svg>
                </div>
                <div>
                    <h1 class="text-2xl font-bold text-gray-800">Academic Assistant</h1>
                    <p class="text-gray-600">Your personal study companion</p>
                </div>
                <div class="ml-auto">
                    <div class="flex items-center space-x-2">
                        <div class="w-3 h-3 bg-green-400 rounded-full"></div>
                        <span class="text-sm text-gray-600">Online</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat Container -->
        <div class="bg-white shadow-lg chat-container p-6" id="chatContainer">
            <!-- Welcome Message -->
            <div class="flex items-start space-x-3 mb-6">
                <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center flex-shrink-0">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                    </svg>
                </div>
                <div class="bg-gray-100 rounded-2xl rounded-tl-md p-4 max-w-md">
                    <p class="text-gray-800">Hi there! ðŸ‘‹ I'm your Academic Assistant. I can help you with:</p>
                    <ul class="mt-2 text-sm text-gray-700 space-y-1">
                        <li>â€¢ Study planning and time management</li>
                        <li>â€¢ Performance predictions based on your habits</li>
                        <li>â€¢ Tips to reduce test anxiety</li>
                        <li>â€¢ Balancing screen time and studies</li>
                    </ul>
                    <p class="mt-3 text-gray-800">What would you like to discuss about your studies?</p>
                </div>
            </div>

            <!-- Typing Indicator -->
            <div class="typing-indicator items-start space-x-3 mb-6" id="typingIndicator">
                <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center flex-shrink-0">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                    </svg>
                </div>
                <div class="bg-gray-100 rounded-2xl rounded-tl-md p-4">
                    <div class="flex space-x-1">
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Input Area -->
        <div class="bg-white rounded-b-2xl shadow-lg p-6">
            <div class="flex space-x-4">
                <input 
                    type="text" 
                    id="messageInput" 
                    placeholder="Ask me about your studies, performance, or study habits..."
                    class="flex-1 border border-gray-300 rounded-full px-6 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    onkeypress="handleKeyPress(event)"
                >
                <button 
                    onclick="sendMessage()" 
                    class="bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-3 rounded-full hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 flex items-center space-x-2 font-medium"
                >
                    <span>Send</span>
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Quick Actions -->
            <div class="mt-4 flex flex-wrap gap-2">
                <button onclick="sendQuickMessage('How can I improve my study habits?')" class="bg-blue-50 text-blue-700 px-4 py-2 rounded-full text-sm hover:bg-blue-100 transition-colors">
                    Study Tips
                </button>
                <button onclick="sendQuickMessage('I study 6 hours daily but still get average marks. Why?')" class="bg-green-50 text-green-700 px-4 py-2 rounded-full text-sm hover:bg-green-100 transition-colors">
                    Performance Issues
                </button>
                <button onclick="sendQuickMessage('How do I manage test anxiety?')" class="bg-purple-50 text-purple-700 px-4 py-2 rounded-full text-sm hover:bg-purple-100 transition-colors">
                    Test Anxiety
                </button>
                <button onclick="sendQuickMessage('How much phone usage affects my grades?')" class="bg-orange-50 text-orange-700 px-4 py-2 rounded-full text-sm hover:bg-orange-100 transition-colors">
                    Screen Time
                </button>
            </div>
        </div>
    </div>

  
   <script>
    // Prediction function based on your model
    function predictMarks(sem, hours, phone, difficulty, anxiety) {
        let marks =
            0.35 * sem +
            0.55 * (Math.min(hours, 10) / 10 * 100) -
            0.15 * phone -
            0.30 * difficulty -
            0.20 * anxiety;

        return Math.max(0, Math.min(100, marks.toFixed(2))); // clamp between 0-100
    }

    function generateResponse(message) {
        const lowerMessage = message.toLowerCase();

        // Pattern to extract input like "sem=90, hours=8, phone=2, diff=2, anxiety=3"
        const match = message.match(/sem\s*=\s*(\d+).*hours\s*=\s*(\d+).*phone\s*=\s*(\d+).*diff\s*=\s*(\d+).*anxiety\s*=\s*(\d+)/i);

        if (match) {
            const sem = parseFloat(match[1]);
            const hours = parseFloat(match[2]);
            const phone = parseFloat(match[3]);
            const diff = parseFloat(match[4]);
            const anxiety = parseFloat(match[5]);

            const predicted = predictMarks(sem, hours, phone, diff, anxiety);

            return `ðŸ“Š Based on your inputs:<br>
                â€¢ Previous Sem % = ${sem}<br>
                â€¢ Study Hours = ${hours}<br>
                â€¢ Phone Usage = ${phone} hrs<br>
                â€¢ Subject Difficulty = ${diff}<br>
                â€¢ Test Anxiety = ${anxiety}<br><br>
                âœ… Predicted Marks = <b>${predicted}</b>/100`;
        }

        // If no structured input given â†’ fallback to normal replies
        if (lowerMessage.includes("marks") || lowerMessage.includes("performance")) {
            return "You can check your predicted marks by entering like this:<br><br><b>sem=90, hours=8, phone=2, diff=2, anxiety=3</b>";
        }

        // Default fallback
        return "I'm your Academic Assistant ðŸ¤–<br>To predict marks, enter:<br><b>sem=95, hours=10, phone=1, diff=2, anxiety=2</b>";
    }

    function handleKeyPress(event) {
        if (event.key === 'Enter') {
            sendMessage();
        }
    }

    function sendQuickMessage(message) {
        document.getElementById('messageInput').value = message;
        sendMessage();
    }

    function sendMessage() {
        const input = document.getElementById('messageInput');
        const message = input.value.trim();
        
        if (!message) return;

        // Add user message
        addMessage(message, 'user');
        input.value = '';

        // Typing effect
        showTypingIndicator();

        setTimeout(() => {
            hideTypingIndicator();
            const response = generateResponse(message);
            addMessage(response, 'bot');
        }, 1500 + Math.random() * 1000);
    }

    function addMessage(message, sender) {
        const chatContainer = document.getElementById('chatContainer');
        const messageDiv = document.createElement('div');
        
        if (sender === 'user') {
            messageDiv.innerHTML = `
                <div class="flex items-start space-x-3 mb-6 justify-end">
                    <div class="bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-2xl rounded-tr-md p-4 max-w-md">
                        <p>${message}</p>
                    </div>
                    <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center flex-shrink-0">
                        <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                    </div>
                </div>
            `;
        } else {
            messageDiv.innerHTML = `
                <div class="flex items-start space-x-3 mb-6">
                    <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center flex-shrink-0">
                        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                        </svg>
                    </div>
                    <div class="bg-gray-100 rounded-2xl rounded-tl-md p-4 max-w-md">
                        <p class="text-gray-800">${message}</p>
                    </div>
                </div>
            `;
        }
        
        chatContainer.insertBefore(messageDiv, document.getElementById('typingIndicator'));
        chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    function showTypingIndicator() {
        document.getElementById('typingIndicator').classList.add('show');
        document.getElementById('chatContainer').scrollTop = document.getElementById('chatContainer').scrollHeight;
    }

    function hideTypingIndicator() {
        document.getElementById('typingIndicator').classList.remove('show');
    }

    window.onload = function() {
        document.getElementById('messageInput').focus();
    };
</script>


<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98816bc304fe17a7',t:'MTc1OTM3ODk3MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
